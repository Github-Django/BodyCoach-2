import{p as G,r as Tn,s as on,c as Dn,f as P,n as fn,b as yn,a as pt,t as mt}from"./8zGwXbCK.js";import{c as nn,b as v,d as Cn,g as ft,f as O,h as xt,i as gt,j as En,e as z,m as Y}from"./CgZt2MS_.js";import{s as bn}from"./Ch_qCilz.js";const qn=document.createElement("i");function Bn(n){const r="&"+n+";";qn.innerHTML=r;const t=qn.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===r?!1:t}function $n(n,r){const t=Number.parseInt(n,r);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"ï¿½":String.fromCodePoint(t)}const kt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dt(n){return n.replace(kt,bt)}function bt(n,r,t){if(r)return r;if(t.charCodeAt(0)===35){const u=t.charCodeAt(1),i=u===120||u===88;return $n(t.slice(i?2:1),i?16:10)}return Bn(t)||n}const Fn={name:"attention",tokenize:yt,resolveAll:St};function St(n,r){let t=-1,e,u,i,a,o,m,h,f;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(e=t;e--;)if(n[e][0]==="exit"&&n[e][1].type==="attentionSequence"&&n[e][1]._open&&r.sliceSerialize(n[e][1]).charCodeAt(0)===r.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[e][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[e][1].end.offset-n[e][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;m=n[e][1].end.offset-n[e][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p=Object.assign({},n[e][1].end),x=Object.assign({},n[t][1].start);Rn(p,-m),Rn(x,m),a={type:m>1?"strongSequence":"emphasisSequence",start:p,end:Object.assign({},n[e][1].end)},o={type:m>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[t][1].start),end:x},i={type:m>1?"strongText":"emphasisText",start:Object.assign({},n[e][1].end),end:Object.assign({},n[t][1].start)},u={type:m>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},n[e][1].end=Object.assign({},a.start),n[t][1].start=Object.assign({},o.end),h=[],n[e][1].end.offset-n[e][1].start.offset&&(h=G(h,[["enter",n[e][1],r],["exit",n[e][1],r]])),h=G(h,[["enter",u,r],["enter",a,r],["exit",a,r],["enter",i,r]]),h=G(h,Tn(r.parser.constructs.insideSpan.null,n.slice(e+1,t),r)),h=G(h,[["exit",i,r],["enter",o,r],["exit",o,r],["exit",u,r]]),n[t][1].end.offset-n[t][1].start.offset?(f=2,h=G(h,[["enter",n[t][1],r],["exit",n[t][1],r]])):f=0,on(n,e-1,t-e+3,h),t=e+h.length-f-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function yt(n,r){const t=this.parser.constructs.attentionMarkers.null,e=this.previous,u=Dn(e);let i;return a;function a(m){return i=m,n.enter("attentionSequence"),o(m)}function o(m){if(m===i)return n.consume(m),o;const h=n.exit("attentionSequence"),f=Dn(m),p=!f||f===2&&u||t.includes(m),x=!u||u===2&&f||t.includes(e);return h._open=!!(i===42?p:p&&(u||!x)),h._close=!!(i===42?x:x&&(f||!p)),r(m)}}function Rn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const wt={name:"autolink",tokenize:zt};function zt(n,r,t){let e=0;return u;function u(c){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),i}function i(c){return nn(c)?(n.consume(c),a):h(c)}function a(c){return c===43||c===45||c===46||v(c)?(e=1,o(c)):h(c)}function o(c){return c===58?(n.consume(c),e=0,m):(c===43||c===45||c===46||v(c))&&e++<32?(n.consume(c),o):(e=0,h(c))}function m(c){return c===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):c===null||c===32||c===60||Cn(c)?t(c):(n.consume(c),m)}function h(c){return c===64?(n.consume(c),f):ft(c)?(n.consume(c),h):t(c)}function f(c){return v(c)?p(c):t(c)}function p(c){return c===46?(n.consume(c),e=0,f):c===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(c),n.exit("autolinkMarker"),n.exit("autolink"),r):x(c)}function x(c){if((c===45||v(c))&&e++<63){const F=c===45?x:p;return n.consume(c),F}return t(c)}}const Yn={name:"blockQuote",tokenize:It,continuation:{tokenize:Ct},exit:Et};function It(n,r,t){const e=this;return u;function u(a){if(a===62){const o=e.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),i}return t(a)}function i(a){return O(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(a))}}function Ct(n,r,t){const e=this;return u;function u(a){return O(a)?P(n,i,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return n.attempt(Yn,r,t)(a)}}function Et(n){n.exit("blockQuote")}const Gn={name:"characterEscape",tokenize:Ft};function Ft(n,r,t){return e;function e(i){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(i),n.exit("escapeMarker"),u}function u(i){return xt(i)?(n.enter("characterEscapeValue"),n.consume(i),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):t(i)}}const Jn={name:"characterReference",tokenize:Tt};function Tt(n,r,t){const e=this;let u=0,i,a;return o;function o(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),m}function m(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),i=31,a=v,f(p))}function h(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),i=6,a=gt,f):(n.enter("characterReferenceValue"),i=7,a=En,f(p))}function f(p){if(p===59&&u){const x=n.exit("characterReferenceValue");return a===v&&!Bn(e.sliceSerialize(x))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return a(p)&&u++<i?(n.consume(p),f):t(p)}}const jn={tokenize:At,partial:!0},Hn={name:"codeFenced",tokenize:Bt,concrete:!0};function Bt(n,r,t){const e=this,u={tokenize:q,partial:!0};let i=0,a=0,o;return m;function m(k){return h(k)}function h(k){const B=e.events[e.events.length-1];return i=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,o=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),f(k)}function f(k){return k===o?(a++,n.consume(k),f):a<3?t(k):(n.exit("codeFencedFenceSequence"),O(k)?P(n,p,"whitespace")(k):p(k))}function p(k){return k===null||z(k)?(n.exit("codeFencedFence"),e.interrupt?r(k):n.check(jn,T,M)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),x(k))}function x(k){return k===null||z(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(k)):O(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),P(n,c,"whitespace")(k)):k===96&&k===o?t(k):(n.consume(k),x)}function c(k){return k===null||z(k)?p(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),F(k))}function F(k){return k===null||z(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(k)):k===96&&k===o?t(k):(n.consume(k),F)}function T(k){return n.attempt(u,M,R)(k)}function R(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),b}function b(k){return i>0&&O(k)?P(n,j,"linePrefix",i+1)(k):j(k)}function j(k){return k===null||z(k)?n.check(jn,T,M)(k):(n.enter("codeFlowValue"),S(k))}function S(k){return k===null||z(k)?(n.exit("codeFlowValue"),j(k)):(n.consume(k),S)}function M(k){return n.exit("codeFenced"),r(k)}function q(k,B,H){let _=0;return L;function L(E){return k.enter("lineEnding"),k.consume(E),k.exit("lineEnding"),w}function w(E){return k.enter("codeFencedFence"),O(E)?P(k,y,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):y(E)}function y(E){return E===o?(k.enter("codeFencedFenceSequence"),D(E)):H(E)}function D(E){return E===o?(_++,k.consume(E),D):_>=a?(k.exit("codeFencedFenceSequence"),O(E)?P(k,V,"whitespace")(E):V(E)):H(E)}function V(E){return E===null||z(E)?(k.exit("codeFencedFence"),B(E)):H(E)}}}function At(n,r,t){const e=this;return u;function u(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i)}function i(a){return e.parser.lazy[e.now().line]?t(a):r(a)}}const zn={name:"codeIndented",tokenize:_t},Ot={tokenize:Lt,partial:!0};function _t(n,r,t){const e=this;return u;function u(h){return n.enter("codeIndented"),P(n,i,"linePrefix",5)(h)}function i(h){const f=e.events[e.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(h):t(h)}function a(h){return h===null?m(h):z(h)?n.attempt(Ot,a,m)(h):(n.enter("codeFlowValue"),o(h))}function o(h){return h===null||z(h)?(n.exit("codeFlowValue"),a(h)):(n.consume(h),o)}function m(h){return n.exit("codeIndented"),r(h)}}function Lt(n,r,t){const e=this;return u;function u(a){return e.parser.lazy[e.now().line]?t(a):z(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),u):P(n,i,"linePrefix",5)(a)}function i(a){const o=e.events[e.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?r(a):z(a)?u(a):t(a)}}const Pt={name:"codeText",tokenize:qt,resolve:Mt,previous:Dt};function Mt(n){let r=n.length-4,t=3,e,u;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(e=t;++e<r;)if(n[e][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[r][1].type="codeTextPadding",t+=2,r-=2;break}}for(e=t-1,r++;++e<=r;)u===void 0?e!==r&&n[e][1].type!=="lineEnding"&&(u=e):(e===r||n[e][1].type==="lineEnding")&&(n[u][1].type="codeTextData",e!==u+2&&(n[u][1].end=n[e-1][1].end,n.splice(u+2,e-u-2),r-=e-u-2,e=u+2),u=void 0);return n}function Dt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qt(n,r,t){let e=0,u,i;return a;function a(p){return n.enter("codeText"),n.enter("codeTextSequence"),o(p)}function o(p){return p===96?(n.consume(p),e++,o):(n.exit("codeTextSequence"),m(p))}function m(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),m):p===96?(i=n.enter("codeTextSequence"),u=0,f(p)):z(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),m):(n.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||z(p)?(n.exit("codeTextData"),m(p)):(n.consume(p),h)}function f(p){return p===96?(n.consume(p),u++,f):u===e?(n.exit("codeTextSequence"),n.exit("codeText"),r(p)):(i.type="codeTextData",h(p))}}function Kn(n){const r={};let t=-1,e,u,i,a,o,m,h;for(;++t<n.length;){for(;t in r;)t=r[t];if(e=n[t],t&&e[1].type==="chunkFlow"&&n[t-1][1].type==="listItemPrefix"&&(m=e[1]._tokenizer.events,i=0,i<m.length&&m[i][1].type==="lineEndingBlank"&&(i+=2),i<m.length&&m[i][1].type==="content"))for(;++i<m.length&&m[i][1].type!=="content";)m[i][1].type==="chunkText"&&(m[i][1]._isInFirstContentOfListItem=!0,i++);if(e[0]==="enter")e[1].contentType&&(Object.assign(r,Rt(n,t)),t=r[t],h=!0);else if(e[1]._container){for(i=t,u=void 0;i--&&(a=n[i],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(u&&(n[u][1].type="lineEndingBlank"),a[1].type="lineEnding",u=i);u&&(e[1].end=Object.assign({},n[u][1].start),o=n.slice(u,t),o.unshift(e),on(n,u,t-u+1,o))}}return!h}function Rt(n,r){const t=n[r][1],e=n[r][2];let u=r-1;const i=[],a=t._tokenizer||e.parser[t.contentType](t.start),o=a.events,m=[],h={};let f,p,x=-1,c=t,F=0,T=0;const R=[T];for(;c;){for(;n[++u][1]!==c;);i.push(u),c._tokenizer||(f=e.sliceStream(c),c.next||f.push(null),p&&a.defineSkip(c.start),c._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),c._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=c,c=c.next}for(c=t;++x<o.length;)o[x][0]==="exit"&&o[x-1][0]==="enter"&&o[x][1].type===o[x-1][1].type&&o[x][1].start.line!==o[x][1].end.line&&(T=x+1,R.push(T),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(a.events=[],c?(c._tokenizer=void 0,c.previous=void 0):R.pop(),x=R.length;x--;){const b=o.slice(R[x],R[x+1]),j=i.pop();m.unshift([j,j+b.length-1]),on(n,j,2,b)}for(x=-1;++x<m.length;)h[F+m[x][0]]=F+m[x][1],F+=m[x][1]-m[x][0]-1;return h}const jt={tokenize:Nt,resolve:Vt},Ht={tokenize:Qt,partial:!0};function Vt(n){return Kn(n),n}function Nt(n,r){let t;return e;function e(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),u(o)}function u(o){return o===null?i(o):z(o)?n.check(Ht,a,i)(o):(n.consume(o),u)}function i(o){return n.exit("chunkContent"),n.exit("content"),r(o)}function a(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,u}}function Qt(n,r,t){const e=this;return u;function u(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),P(n,i,"linePrefix")}function i(a){if(a===null||z(a))return t(a);const o=e.events[e.events.length-1];return!e.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?r(a):n.interrupt(e.parser.constructs.flow,t,r)(a)}}function Xn(n,r,t,e,u,i,a,o,m){const h=m||Number.POSITIVE_INFINITY;let f=0;return p;function p(b){return b===60?(n.enter(e),n.enter(u),n.enter(i),n.consume(b),n.exit(i),x):b===null||b===32||b===41||Cn(b)?t(b):(n.enter(e),n.enter(a),n.enter(o),n.enter("chunkString",{contentType:"string"}),T(b))}function x(b){return b===62?(n.enter(i),n.consume(b),n.exit(i),n.exit(u),n.exit(e),r):(n.enter(o),n.enter("chunkString",{contentType:"string"}),c(b))}function c(b){return b===62?(n.exit("chunkString"),n.exit(o),x(b)):b===null||b===60||z(b)?t(b):(n.consume(b),b===92?F:c)}function F(b){return b===60||b===62||b===92?(n.consume(b),c):c(b)}function T(b){return!f&&(b===null||b===41||Y(b))?(n.exit("chunkString"),n.exit(o),n.exit(a),n.exit(e),r(b)):f<h&&b===40?(n.consume(b),f++,T):b===41?(n.consume(b),f--,T):b===null||b===32||b===40||Cn(b)?t(b):(n.consume(b),b===92?R:T)}function R(b){return b===40||b===41||b===92?(n.consume(b),T):T(b)}}function Zn(n,r,t,e,u,i){const a=this;let o=0,m;return h;function h(c){return n.enter(e),n.enter(u),n.consume(c),n.exit(u),n.enter(i),f}function f(c){return o>999||c===null||c===91||c===93&&!m||c===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?t(c):c===93?(n.exit(i),n.enter(u),n.consume(c),n.exit(u),n.exit(e),r):z(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),f):(n.enter("chunkString",{contentType:"string"}),p(c))}function p(c){return c===null||c===91||c===93||z(c)||o++>999?(n.exit("chunkString"),f(c)):(n.consume(c),m||(m=!O(c)),c===92?x:p)}function x(c){return c===91||c===92||c===93?(n.consume(c),o++,p):p(c)}}function vn(n,r,t,e,u,i){let a;return o;function o(x){return x===34||x===39||x===40?(n.enter(e),n.enter(u),n.consume(x),n.exit(u),a=x===40?41:x,m):t(x)}function m(x){return x===a?(n.enter(u),n.consume(x),n.exit(u),n.exit(e),r):(n.enter(i),h(x))}function h(x){return x===a?(n.exit(i),m(a)):x===null?t(x):z(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),P(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===a||x===null||z(x)?(n.exit("chunkString"),h(x)):(n.consume(x),x===92?p:f)}function p(x){return x===a||x===92?(n.consume(x),f):f(x)}}function dn(n,r){let t;return e;function e(u){return z(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),t=!0,e):O(u)?P(n,e,t?"linePrefix":"lineSuffix")(u):r(u)}}const Ut={name:"definition",tokenize:$t},Wt={tokenize:Yt,partial:!0};function $t(n,r,t){const e=this;let u;return i;function i(c){return n.enter("definition"),a(c)}function a(c){return Zn.call(e,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function o(c){return u=fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)),c===58?(n.enter("definitionMarker"),n.consume(c),n.exit("definitionMarker"),m):t(c)}function m(c){return Y(c)?dn(n,h)(c):h(c)}function h(c){return Xn(n,f,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function f(c){return n.attempt(Wt,p,p)(c)}function p(c){return O(c)?P(n,x,"whitespace")(c):x(c)}function x(c){return c===null||z(c)?(n.exit("definition"),e.parser.defined.push(u),r(c)):t(c)}}function Yt(n,r,t){return e;function e(o){return Y(o)?dn(n,u)(o):t(o)}function u(o){return vn(n,i,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return O(o)?P(n,a,"whitespace")(o):a(o)}function a(o){return o===null||z(o)?r(o):t(o)}}const Gt={name:"hardBreakEscape",tokenize:Jt};function Jt(n,r,t){return e;function e(i){return n.enter("hardBreakEscape"),n.consume(i),u}function u(i){return z(i)?(n.exit("hardBreakEscape"),r(i)):t(i)}}const Kt={name:"headingAtx",tokenize:Zt,resolve:Xt};function Xt(n,r){let t=n.length-2,e=3,u,i;return n[e][1].type==="whitespace"&&(e+=2),t-2>e&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(e===t-1||t-4>e&&n[t-2][1].type==="whitespace")&&(t-=e+1===t?2:4),t>e&&(u={type:"atxHeadingText",start:n[e][1].start,end:n[t][1].end},i={type:"chunkText",start:n[e][1].start,end:n[t][1].end,contentType:"text"},on(n,e,t-e+1,[["enter",u,r],["enter",i,r],["exit",i,r],["exit",u,r]])),n}function Zt(n,r,t){let e=0;return u;function u(f){return n.enter("atxHeading"),i(f)}function i(f){return n.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&e++<6?(n.consume(f),a):f===null||Y(f)?(n.exit("atxHeadingSequence"),o(f)):t(f)}function o(f){return f===35?(n.enter("atxHeadingSequence"),m(f)):f===null||z(f)?(n.exit("atxHeading"),r(f)):O(f)?P(n,o,"whitespace")(f):(n.enter("atxHeadingText"),h(f))}function m(f){return f===35?(n.consume(f),m):(n.exit("atxHeadingSequence"),o(f))}function h(f){return f===null||f===35||Y(f)?(n.exit("atxHeadingText"),o(f)):(n.consume(f),h)}}const vt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Vn=["pre","script","style","textarea"],ne={name:"htmlFlow",tokenize:ie,resolveTo:re,concrete:!0},te={tokenize:ae,partial:!0},ee={tokenize:ue,partial:!0};function re(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function ie(n,r,t){const e=this;let u,i,a,o,m;return h;function h(s){return f(s)}function f(s){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(s),p}function p(s){return s===33?(n.consume(s),x):s===47?(n.consume(s),i=!0,T):s===63?(n.consume(s),u=3,e.interrupt?r:l):nn(s)?(n.consume(s),a=String.fromCharCode(s),R):t(s)}function x(s){return s===45?(n.consume(s),u=2,c):s===91?(n.consume(s),u=5,o=0,F):nn(s)?(n.consume(s),u=4,e.interrupt?r:l):t(s)}function c(s){return s===45?(n.consume(s),e.interrupt?r:l):t(s)}function F(s){const X="CDATA[";return s===X.charCodeAt(o++)?(n.consume(s),o===X.length?e.interrupt?r:y:F):t(s)}function T(s){return nn(s)?(n.consume(s),a=String.fromCharCode(s),R):t(s)}function R(s){if(s===null||s===47||s===62||Y(s)){const X=s===47,sn=a.toLowerCase();return!X&&!i&&Vn.includes(sn)?(u=1,e.interrupt?r(s):y(s)):vt.includes(a.toLowerCase())?(u=6,X?(n.consume(s),b):e.interrupt?r(s):y(s)):(u=7,e.interrupt&&!e.parser.lazy[e.now().line]?t(s):i?j(s):S(s))}return s===45||v(s)?(n.consume(s),a+=String.fromCharCode(s),R):t(s)}function b(s){return s===62?(n.consume(s),e.interrupt?r:y):t(s)}function j(s){return O(s)?(n.consume(s),j):L(s)}function S(s){return s===47?(n.consume(s),L):s===58||s===95||nn(s)?(n.consume(s),M):O(s)?(n.consume(s),S):L(s)}function M(s){return s===45||s===46||s===58||s===95||v(s)?(n.consume(s),M):q(s)}function q(s){return s===61?(n.consume(s),k):O(s)?(n.consume(s),q):S(s)}function k(s){return s===null||s===60||s===61||s===62||s===96?t(s):s===34||s===39?(n.consume(s),m=s,B):O(s)?(n.consume(s),k):H(s)}function B(s){return s===m?(n.consume(s),m=null,_):s===null||z(s)?t(s):(n.consume(s),B)}function H(s){return s===null||s===34||s===39||s===47||s===60||s===61||s===62||s===96||Y(s)?q(s):(n.consume(s),H)}function _(s){return s===47||s===62||O(s)?S(s):t(s)}function L(s){return s===62?(n.consume(s),w):t(s)}function w(s){return s===null||z(s)?y(s):O(s)?(n.consume(s),w):t(s)}function y(s){return s===45&&u===2?(n.consume(s),U):s===60&&u===1?(n.consume(s),N):s===62&&u===4?(n.consume(s),K):s===63&&u===3?(n.consume(s),l):s===93&&u===5?(n.consume(s),tn):z(s)&&(u===6||u===7)?(n.exit("htmlFlowData"),n.check(te,en,D)(s)):s===null||z(s)?(n.exit("htmlFlowData"),D(s)):(n.consume(s),y)}function D(s){return n.check(ee,V,en)(s)}function V(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),E}function E(s){return s===null||z(s)?D(s):(n.enter("htmlFlowData"),y(s))}function U(s){return s===45?(n.consume(s),l):y(s)}function N(s){return s===47?(n.consume(s),a="",J):y(s)}function J(s){if(s===62){const X=a.toLowerCase();return Vn.includes(X)?(n.consume(s),K):y(s)}return nn(s)&&a.length<8?(n.consume(s),a+=String.fromCharCode(s),J):y(s)}function tn(s){return s===93?(n.consume(s),l):y(s)}function l(s){return s===62?(n.consume(s),K):s===45&&u===2?(n.consume(s),l):y(s)}function K(s){return s===null||z(s)?(n.exit("htmlFlowData"),en(s)):(n.consume(s),K)}function en(s){return n.exit("htmlFlow"),r(s)}}function ue(n,r,t){const e=this;return u;function u(a){return z(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):t(a)}function i(a){return e.parser.lazy[e.now().line]?t(a):r(a)}}function ae(n,r,t){return e;function e(u){return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),n.attempt(yn,r,t)}}const le={name:"htmlText",tokenize:oe};function oe(n,r,t){const e=this;let u,i,a;return o;function o(l){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(l),m}function m(l){return l===33?(n.consume(l),h):l===47?(n.consume(l),q):l===63?(n.consume(l),S):nn(l)?(n.consume(l),H):t(l)}function h(l){return l===45?(n.consume(l),f):l===91?(n.consume(l),i=0,F):nn(l)?(n.consume(l),j):t(l)}function f(l){return l===45?(n.consume(l),c):t(l)}function p(l){return l===null?t(l):l===45?(n.consume(l),x):z(l)?(a=p,N(l)):(n.consume(l),p)}function x(l){return l===45?(n.consume(l),c):p(l)}function c(l){return l===62?U(l):l===45?x(l):p(l)}function F(l){const K="CDATA[";return l===K.charCodeAt(i++)?(n.consume(l),i===K.length?T:F):t(l)}function T(l){return l===null?t(l):l===93?(n.consume(l),R):z(l)?(a=T,N(l)):(n.consume(l),T)}function R(l){return l===93?(n.consume(l),b):T(l)}function b(l){return l===62?U(l):l===93?(n.consume(l),b):T(l)}function j(l){return l===null||l===62?U(l):z(l)?(a=j,N(l)):(n.consume(l),j)}function S(l){return l===null?t(l):l===63?(n.consume(l),M):z(l)?(a=S,N(l)):(n.consume(l),S)}function M(l){return l===62?U(l):S(l)}function q(l){return nn(l)?(n.consume(l),k):t(l)}function k(l){return l===45||v(l)?(n.consume(l),k):B(l)}function B(l){return z(l)?(a=B,N(l)):O(l)?(n.consume(l),B):U(l)}function H(l){return l===45||v(l)?(n.consume(l),H):l===47||l===62||Y(l)?_(l):t(l)}function _(l){return l===47?(n.consume(l),U):l===58||l===95||nn(l)?(n.consume(l),L):z(l)?(a=_,N(l)):O(l)?(n.consume(l),_):U(l)}function L(l){return l===45||l===46||l===58||l===95||v(l)?(n.consume(l),L):w(l)}function w(l){return l===61?(n.consume(l),y):z(l)?(a=w,N(l)):O(l)?(n.consume(l),w):_(l)}function y(l){return l===null||l===60||l===61||l===62||l===96?t(l):l===34||l===39?(n.consume(l),u=l,D):z(l)?(a=y,N(l)):O(l)?(n.consume(l),y):(n.consume(l),V)}function D(l){return l===u?(n.consume(l),u=void 0,E):l===null?t(l):z(l)?(a=D,N(l)):(n.consume(l),D)}function V(l){return l===null||l===34||l===39||l===60||l===61||l===96?t(l):l===47||l===62||Y(l)?_(l):(n.consume(l),V)}function E(l){return l===47||l===62||Y(l)?_(l):t(l)}function U(l){return l===62?(n.consume(l),n.exit("htmlTextData"),n.exit("htmlText"),r):t(l)}function N(l){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),J}function J(l){return O(l)?P(n,tn,"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):tn(l)}function tn(l){return n.enter("htmlTextData"),a(l)}}const An={name:"labelEnd",tokenize:fe,resolveTo:me,resolveAll:pe},se={tokenize:xe},ce={tokenize:ge},he={tokenize:ke};function pe(n){let r=-1;for(;++r<n.length;){const t=n[r][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(n.splice(r+1,t.type==="labelImage"?4:2),t.type="data",r++)}return n}function me(n,r){let t=n.length,e=0,u,i,a,o;for(;t--;)if(u=n[t][1],i){if(u.type==="link"||u.type==="labelLink"&&u._inactive)break;n[t][0]==="enter"&&u.type==="labelLink"&&(u._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(u.type==="labelImage"||u.type==="labelLink")&&!u._balanced&&(i=t,u.type!=="labelLink")){e=2;break}}else u.type==="labelEnd"&&(a=t);const m={type:n[i][1].type==="labelLink"?"link":"image",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)},h={type:"label",start:Object.assign({},n[i][1].start),end:Object.assign({},n[a][1].end)},f={type:"labelText",start:Object.assign({},n[i+e+2][1].end),end:Object.assign({},n[a-2][1].start)};return o=[["enter",m,r],["enter",h,r]],o=G(o,n.slice(i+1,i+e+3)),o=G(o,[["enter",f,r]]),o=G(o,Tn(r.parser.constructs.insideSpan.null,n.slice(i+e+4,a-3),r)),o=G(o,[["exit",f,r],n[a-2],n[a-1],["exit",h,r]]),o=G(o,n.slice(a+1)),o=G(o,[["exit",m,r]]),on(n,i,n.length,o),n}function fe(n,r,t){const e=this;let u=e.events.length,i,a;for(;u--;)if((e.events[u][1].type==="labelImage"||e.events[u][1].type==="labelLink")&&!e.events[u][1]._balanced){i=e.events[u][1];break}return o;function o(x){return i?i._inactive?p(x):(a=e.parser.defined.includes(fn(e.sliceSerialize({start:i.end,end:e.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(x),n.exit("labelMarker"),n.exit("labelEnd"),m):t(x)}function m(x){return x===40?n.attempt(se,f,a?f:p)(x):x===91?n.attempt(ce,f,a?h:p)(x):a?f(x):p(x)}function h(x){return n.attempt(he,f,p)(x)}function f(x){return r(x)}function p(x){return i._balanced=!0,t(x)}}function xe(n,r,t){return e;function e(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),u}function u(p){return Y(p)?dn(n,i)(p):i(p)}function i(p){return p===41?f(p):Xn(n,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return Y(p)?dn(n,m)(p):f(p)}function o(p){return t(p)}function m(p){return p===34||p===39||p===40?vn(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function h(p){return Y(p)?dn(n,f)(p):f(p)}function f(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),r):t(p)}}function ge(n,r,t){const e=this;return u;function u(o){return Zn.call(e,n,i,a,"reference","referenceMarker","referenceString")(o)}function i(o){return e.parser.defined.includes(fn(e.sliceSerialize(e.events[e.events.length-1][1]).slice(1,-1)))?r(o):t(o)}function a(o){return t(o)}}function ke(n,r,t){return e;function e(i){return n.enter("reference"),n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),u}function u(i){return i===93?(n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),n.exit("reference"),r):t(i)}}const de={name:"labelStartImage",tokenize:be,resolveAll:An.resolveAll};function be(n,r,t){const e=this;return u;function u(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),i}function i(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),a):t(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(o):r(o)}}const Se={name:"labelStartLink",tokenize:ye,resolveAll:An.resolveAll};function ye(n,r,t){const e=this;return u;function u(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in e.parser.constructs?t(a):r(a)}}const In={name:"lineEnding",tokenize:we};function we(n,r){return t;function t(e){return n.enter("lineEnding"),n.consume(e),n.exit("lineEnding"),P(n,r,"linePrefix")}}const Sn={name:"thematicBreak",tokenize:ze};function ze(n,r,t){let e=0,u;return i;function i(h){return n.enter("thematicBreak"),a(h)}function a(h){return u=h,o(h)}function o(h){return h===u?(n.enter("thematicBreakSequence"),m(h)):e>=3&&(h===null||z(h))?(n.exit("thematicBreak"),r(h)):t(h)}function m(h){return h===u?(n.consume(h),e++,m):(n.exit("thematicBreakSequence"),O(h)?P(n,o,"whitespace")(h):o(h))}}const W={name:"list",tokenize:Ee,continuation:{tokenize:Fe},exit:Be},Ie={tokenize:Ae,partial:!0},Ce={tokenize:Te,partial:!0};function Ee(n,r,t){const e=this,u=e.events[e.events.length-1];let i=u&&u[1].type==="linePrefix"?u[2].sliceSerialize(u[1],!0).length:0,a=0;return o;function o(c){const F=e.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(F==="listUnordered"?!e.containerState.marker||c===e.containerState.marker:En(c)){if(e.containerState.type||(e.containerState.type=F,n.enter(F,{_container:!0})),F==="listUnordered")return n.enter("listItemPrefix"),c===42||c===45?n.check(Sn,t,h)(c):h(c);if(!e.interrupt||c===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),m(c)}return t(c)}function m(c){return En(c)&&++a<10?(n.consume(c),m):(!e.interrupt||a<2)&&(e.containerState.marker?c===e.containerState.marker:c===41||c===46)?(n.exit("listItemValue"),h(c)):t(c)}function h(c){return n.enter("listItemMarker"),n.consume(c),n.exit("listItemMarker"),e.containerState.marker=e.containerState.marker||c,n.check(yn,e.interrupt?t:f,n.attempt(Ie,x,p))}function f(c){return e.containerState.initialBlankLine=!0,i++,x(c)}function p(c){return O(c)?(n.enter("listItemPrefixWhitespace"),n.consume(c),n.exit("listItemPrefixWhitespace"),x):t(c)}function x(c){return e.containerState.size=i+e.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(c)}}function Fe(n,r,t){const e=this;return e.containerState._closeFlow=void 0,n.check(yn,u,i);function u(o){return e.containerState.furtherBlankLines=e.containerState.furtherBlankLines||e.containerState.initialBlankLine,P(n,r,"listItemIndent",e.containerState.size+1)(o)}function i(o){return e.containerState.furtherBlankLines||!O(o)?(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,a(o)):(e.containerState.furtherBlankLines=void 0,e.containerState.initialBlankLine=void 0,n.attempt(Ce,r,a)(o))}function a(o){return e.containerState._closeFlow=!0,e.interrupt=void 0,P(n,n.attempt(W,r,t),"linePrefix",e.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Te(n,r,t){const e=this;return P(n,u,"listItemIndent",e.containerState.size+1);function u(i){const a=e.events[e.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===e.containerState.size?r(i):t(i)}}function Be(n){n.exit(this.containerState.type)}function Ae(n,r,t){const e=this;return P(n,u,"listItemPrefixWhitespace",e.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function u(i){const a=e.events[e.events.length-1];return!O(i)&&a&&a[1].type==="listItemPrefixWhitespace"?r(i):t(i)}}const Nn={name:"setextUnderline",tokenize:_e,resolveTo:Oe};function Oe(n,r){let t=n.length,e,u,i;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){e=t;break}n[t][1].type==="paragraph"&&(u=t)}else n[t][1].type==="content"&&n.splice(t,1),!i&&n[t][1].type==="definition"&&(i=t);const a={type:"setextHeading",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[u][1].type="setextHeadingText",i?(n.splice(u,0,["enter",a,r]),n.splice(i+1,0,["exit",n[e][1],r]),n[e][1].end=Object.assign({},n[i][1].end)):n[e][1]=a,n.push(["exit",a,r]),n}function _e(n,r,t){const e=this;let u;return i;function i(h){let f=e.events.length,p;for(;f--;)if(e.events[f][1].type!=="lineEnding"&&e.events[f][1].type!=="linePrefix"&&e.events[f][1].type!=="content"){p=e.events[f][1].type==="paragraph";break}return!e.parser.lazy[e.now().line]&&(e.interrupt||p)?(n.enter("setextHeadingLine"),u=h,a(h)):t(h)}function a(h){return n.enter("setextHeadingLineSequence"),o(h)}function o(h){return h===u?(n.consume(h),o):(n.exit("setextHeadingLineSequence"),O(h)?P(n,m,"lineSuffix")(h):m(h))}function m(h){return h===null||z(h)?(n.exit("setextHeadingLine"),r(h)):t(h)}}const Le={tokenize:Pe};function Pe(n){const r=n.attempt(this.parser.constructs.contentInitial,e,u);let t;return r;function e(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),P(n,r,"linePrefix")}function u(o){return n.enter("paragraph"),i(o)}function i(o){const m=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=m),t=m,a(o)}function a(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return z(o)?(n.consume(o),n.exit("chunkText"),i):(n.consume(o),a)}}const Me={tokenize:De},Qn={tokenize:qe};function De(n){const r=this,t=[];let e=0,u,i,a;return o;function o(S){if(e<t.length){const M=t[e];return r.containerState=M[1],n.attempt(M[0].continuation,m,h)(S)}return h(S)}function m(S){if(e++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,u&&j();const M=r.events.length;let q=M,k;for(;q--;)if(r.events[q][0]==="exit"&&r.events[q][1].type==="chunkFlow"){k=r.events[q][1].end;break}b(e);let B=M;for(;B<r.events.length;)r.events[B][1].end=Object.assign({},k),B++;return on(r.events,q+1,0,r.events.slice(M)),r.events.length=B,h(S)}return o(S)}function h(S){if(e===t.length){if(!u)return x(S);if(u.currentConstruct&&u.currentConstruct.concrete)return F(S);r.interrupt=!!(u.currentConstruct&&!u._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Qn,f,p)(S)}function f(S){return u&&j(),b(e),x(S)}function p(S){return r.parser.lazy[r.now().line]=e!==t.length,a=r.now().offset,F(S)}function x(S){return r.containerState={},n.attempt(Qn,c,F)(S)}function c(S){return e++,t.push([r.currentConstruct,r.containerState]),x(S)}function F(S){if(S===null){u&&j(),b(0),n.consume(S);return}return u=u||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:u}),T(S)}function T(S){if(S===null){R(n.exit("chunkFlow"),!0),b(0),n.consume(S);return}return z(S)?(n.consume(S),R(n.exit("chunkFlow")),e=0,r.interrupt=void 0,o):(n.consume(S),T)}function R(S,M){const q=r.sliceStream(S);if(M&&q.push(null),S.previous=i,i&&(i.next=S),i=S,u.defineSkip(S.start),u.write(q),r.parser.lazy[S.start.line]){let k=u.events.length;for(;k--;)if(u.events[k][1].start.offset<a&&(!u.events[k][1].end||u.events[k][1].end.offset>a))return;const B=r.events.length;let H=B,_,L;for(;H--;)if(r.events[H][0]==="exit"&&r.events[H][1].type==="chunkFlow"){if(_){L=r.events[H][1].end;break}_=!0}for(b(e),k=B;k<r.events.length;)r.events[k][1].end=Object.assign({},L),k++;on(r.events,H+1,0,r.events.slice(B)),r.events.length=k}}function b(S){let M=t.length;for(;M-- >S;){const q=t[M];r.containerState=q[1],q[0].exit.call(r,n)}t.length=S}function j(){u.write([null]),i=void 0,u=void 0,r.containerState._closeFlow=void 0}}function qe(n,r,t){return P(n,n.attempt(this.parser.constructs.document,r,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Re={tokenize:je};function je(n){const r=this,t=n.attempt(yn,e,n.attempt(this.parser.constructs.flowInitial,u,P(n,n.attempt(this.parser.constructs.flow,u,n.attempt(jt,u)),"linePrefix")));return t;function e(i){if(i===null){n.consume(i);return}return n.enter("lineEndingBlank"),n.consume(i),n.exit("lineEndingBlank"),r.currentConstruct=void 0,t}function u(i){if(i===null){n.consume(i);return}return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),r.currentConstruct=void 0,t}}const He={resolveAll:tt()},Ve=nt("string"),Ne=nt("text");function nt(n){return{tokenize:r,resolveAll:tt(n==="text"?Qe:void 0)};function r(t){const e=this,u=this.parser.constructs[n],i=t.attempt(u,a,o);return a;function a(f){return h(f)?i(f):o(f)}function o(f){if(f===null){t.consume(f);return}return t.enter("data"),t.consume(f),m}function m(f){return h(f)?(t.exit("data"),i(f)):(t.consume(f),m)}function h(f){if(f===null)return!0;const p=u[f];let x=-1;if(p)for(;++x<p.length;){const c=p[x];if(!c.previous||c.previous.call(e,e.previous))return!0}return!1}}}function tt(n){return r;function r(t,e){let u=-1,i;for(;++u<=t.length;)i===void 0?t[u]&&t[u][1].type==="data"&&(i=u,u++):(!t[u]||t[u][1].type!=="data")&&(u!==i+2&&(t[i][1].end=t[u-1][1].end,t.splice(i+2,u-i-2),u=i+2),i=void 0);return n?n(t,e):t}}function Qe(n,r){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const e=n[t-1][1],u=r.sliceStream(e);let i=u.length,a=-1,o=0,m;for(;i--;){const h=u[i];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(h===-2)m=!0,o++;else if(h!==-1){i++;break}}if(o){const h={type:t===n.length||m||o<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-o,offset:e.end.offset-o,_index:e.start._index+i,_bufferIndex:i?a:e.start._bufferIndex+a},end:Object.assign({},e.end)};e.end=Object.assign({},h.start),e.start.offset===e.end.offset?Object.assign(e,h):(n.splice(t,0,["enter",h,r],["exit",h,r]),t+=2)}t++}return n}function Ue(n,r,t){let e=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const u={},i=[];let a=[],o=[];const m={consume:j,enter:S,exit:M,attempt:B(q),check:B(k),interrupt:B(k,{interrupt:!0})},h={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:c,sliceSerialize:x,now:F,defineSkip:T,write:p};let f=r.tokenize.call(h,m);return r.resolveAll&&i.push(r),h;function p(w){return a=G(a,w),R(),a[a.length-1]!==null?[]:(H(r,0),h.events=Tn(i,h.events,h),h.events)}function x(w,y){return $e(c(w),y)}function c(w){return We(a,w)}function F(){const{line:w,column:y,offset:D,_index:V,_bufferIndex:E}=e;return{line:w,column:y,offset:D,_index:V,_bufferIndex:E}}function T(w){u[w.line]=w.column,L()}function R(){let w;for(;e._index<a.length;){const y=a[e._index];if(typeof y=="string")for(w=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===w&&e._bufferIndex<y.length;)b(y.charCodeAt(e._bufferIndex));else b(y)}}function b(w){f=f(w)}function j(w){z(w)?(e.line++,e.column=1,e.offset+=w===-3?2:1,L()):w!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===a[e._index].length&&(e._bufferIndex=-1,e._index++)),h.previous=w}function S(w,y){const D=y||{};return D.type=w,D.start=F(),h.events.push(["enter",D,h]),o.push(D),D}function M(w){const y=o.pop();return y.end=F(),h.events.push(["exit",y,h]),y}function q(w,y){H(w,y.from)}function k(w,y){y.restore()}function B(w,y){return D;function D(V,E,U){let N,J,tn,l;return Array.isArray(V)?en(V):"tokenize"in V?en([V]):K(V);function K(Q){return xn;function xn(an){const pn=an!==null&&Q[an],cn=an!==null&&Q.null,wn=[...Array.isArray(pn)?pn:pn?[pn]:[],...Array.isArray(cn)?cn:cn?[cn]:[]];return en(wn)(an)}}function en(Q){return N=Q,J=0,Q.length===0?U:s(Q[J])}function s(Q){return xn;function xn(an){return l=_(),tn=Q,Q.partial||(h.currentConstruct=Q),Q.name&&h.parser.constructs.disable.null.includes(Q.name)?sn():Q.tokenize.call(y?Object.assign(Object.create(h),y):h,m,X,sn)(an)}}function X(Q){return w(tn,l),E}function sn(Q){return l.restore(),++J<N.length?s(N[J]):U}}}function H(w,y){w.resolveAll&&!i.includes(w)&&i.push(w),w.resolve&&on(h.events,y,h.events.length-y,w.resolve(h.events.slice(y),h)),w.resolveTo&&(h.events=w.resolveTo(h.events,h))}function _(){const w=F(),y=h.previous,D=h.currentConstruct,V=h.events.length,E=Array.from(o);return{restore:U,from:V};function U(){e=w,h.previous=y,h.currentConstruct=D,h.events.length=V,o=E,L()}}function L(){e.line in u&&e.column<2&&(e.column=u[e.line],e.offset+=u[e.line]-1)}}function We(n,r){const t=r.start._index,e=r.start._bufferIndex,u=r.end._index,i=r.end._bufferIndex;let a;if(t===u)a=[n[t].slice(e,i)];else{if(a=n.slice(t,u),e>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(e):a.shift()}i>0&&a.push(n[u].slice(0,i))}return a}function $e(n,r){let t=-1;const e=[];let u;for(;++t<n.length;){const i=n[t];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=r?" ":"	";break}case-1:{if(!r&&u)continue;a=" ";break}default:a=String.fromCharCode(i)}u=i===-2,e.push(a)}return e.join("")}const Ye={42:W,43:W,45:W,48:W,49:W,50:W,51:W,52:W,53:W,54:W,55:W,56:W,57:W,62:Yn},Ge={91:Ut},Je={[-2]:zn,[-1]:zn,32:zn},Ke={35:Kt,42:Sn,45:[Nn,Sn],60:ne,61:Nn,95:Sn,96:Hn,126:Hn},Xe={38:Jn,92:Gn},Ze={[-5]:In,[-4]:In,[-3]:In,33:de,38:Jn,42:Fn,60:[wt,le],91:Se,92:[Gt,Gn],93:An,95:Fn,96:Pt},ve={null:[Fn,He]},nr={null:[42,95]},tr={null:[]},er=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nr,contentInitial:Ge,disable:tr,document:Ye,flow:Ke,flowInitial:Je,insideSpan:ve,string:Xe,text:Ze},Symbol.toStringTag,{value:"Module"}));function rr(n){const t=pt([er,...(n||{}).extensions||[]]),e={defined:[],lazy:{},constructs:t,content:u(Le),document:u(Me),flow:u(Re),string:u(Ve),text:u(Ne)};return e;function u(i){return a;function a(o){return Ue(e,i,o)}}}function ir(n){for(;!Kn(n););return n}const Un=/[\0\t\n\r]/g;function ur(){let n=1,r="",t=!0,e;return u;function u(i,a,o){const m=[];let h,f,p,x,c;for(i=r+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),p=0,r="",t&&(i.charCodeAt(0)===65279&&p++,t=void 0);p<i.length;){if(Un.lastIndex=p,h=Un.exec(i),x=h&&h.index!==void 0?h.index:i.length,c=i.charCodeAt(x),!h){r=i.slice(p);break}if(c===10&&p===x&&e)m.push(-3),e=void 0;else switch(e&&(m.push(-5),e=void 0),p<x&&(m.push(i.slice(p,x)),n+=x-p),c){case 0:{m.push(65533),n++;break}case 9:{for(f=Math.ceil(n/4)*4,m.push(-2);n++<f;)m.push(-1);break}case 10:{m.push(-4),n=1;break}default:e=!0,n=1}p=x+1}return o&&(e&&m.push(-5),r&&m.push(r),m.push(null)),m}}const et={}.hasOwnProperty;function ar(n,r,t){return typeof r!="string"&&(t=r,r=void 0),lr(t)(ir(rr(t).document().write(ur()(n,r,!0))))}function lr(n){const r={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Pn),autolinkProtocol:_,autolinkEmail:_,atxHeading:i(On),blockQuote:i(pn),characterEscape:_,characterReference:_,codeFenced:i(cn),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(cn,a),codeText:i(wn,a),codeTextData:_,data:_,codeFlowValue:_,definition:i(it),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(ut),hardBreakEscape:i(_n),hardBreakTrailing:i(_n),htmlFlow:i(Ln,a),htmlFlowData:_,htmlText:i(Ln,a),htmlTextData:_,image:i(at),label:a,link:i(Pn),listItem:i(lt),listItemValue:x,listOrdered:i(Mn,p),listUnordered:i(Mn),paragraph:i(ot),reference:s,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(On),strong:i(st),thematicBreak:i(ht)},exit:{atxHeading:m(),atxHeadingSequence:q,autolink:m(),autolinkEmail:an,autolinkProtocol:xn,blockQuote:m(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:sn,characterReferenceMarkerNumeric:sn,characterReferenceValue:Q,codeFenced:m(R),codeFencedFence:T,codeFencedFenceInfo:c,codeFencedFenceMeta:F,codeFlowValue:L,codeIndented:m(b),codeText:m(E),codeTextData:L,data:L,definition:m(),definitionDestinationString:M,definitionLabelString:j,definitionTitleString:S,emphasis:m(),hardBreakEscape:m(y),hardBreakTrailing:m(y),htmlFlow:m(D),htmlFlowData:L,htmlText:m(V),htmlTextData:L,image:m(N),label:tn,labelText:J,lineEnding:w,link:m(U),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:X,resourceDestinationString:l,resourceTitleString:K,resource:en,setextHeading:m(H),setextHeadingLineSequence:B,setextHeadingText:k,strong:m(),thematicBreak:m()}};rt(r,(n||{}).mdastExtensions||[]);const t={};return e;function e(g){let d={type:"root",children:[]};const I={stack:[d],tokenStack:[],config:r,enter:o,exit:h,buffer:a,resume:f,data:t},C=[];let A=-1;for(;++A<g.length;)if(g[A][1].type==="listOrdered"||g[A][1].type==="listUnordered")if(g[A][0]==="enter")C.push(A);else{const Z=C.pop();A=u(g,Z,A)}for(A=-1;++A<g.length;){const Z=r[g[A][0]];et.call(Z,g[A][1].type)&&Z[g[A][1].type].call(Object.assign({sliceSerialize:g[A][2].sliceSerialize},I),g[A][1])}if(I.tokenStack.length>0){const Z=I.tokenStack[I.tokenStack.length-1];(Z[1]||Wn).call(I,void 0,Z[0])}for(d.position={start:ln(g.length>0?g[0][1].start:{line:1,column:1,offset:0}),end:ln(g.length>0?g[g.length-2][1].end:{line:1,column:1,offset:0})},A=-1;++A<r.transforms.length;)d=r.transforms[A](d)||d;return d}function u(g,d,I){let C=d-1,A=-1,Z=!1,hn,rn,gn,kn;for(;++C<=I;){const $=g[C];switch($[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{$[0]==="enter"?A++:A--,kn=void 0;break}case"lineEndingBlank":{$[0]==="enter"&&(hn&&!kn&&!A&&!gn&&(gn=C),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!A&&$[0]==="enter"&&$[1].type==="listItemPrefix"||A===-1&&$[0]==="exit"&&($[1].type==="listUnordered"||$[1].type==="listOrdered")){if(hn){let mn=C;for(rn=void 0;mn--;){const un=g[mn];if(un[1].type==="lineEnding"||un[1].type==="lineEndingBlank"){if(un[0]==="exit")continue;rn&&(g[rn][1].type="lineEndingBlank",Z=!0),un[1].type="lineEnding",rn=mn}else if(!(un[1].type==="linePrefix"||un[1].type==="blockQuotePrefix"||un[1].type==="blockQuotePrefixWhitespace"||un[1].type==="blockQuoteMarker"||un[1].type==="listItemIndent"))break}gn&&(!rn||gn<rn)&&(hn._spread=!0),hn.end=Object.assign({},rn?g[rn][1].start:$[1].end),g.splice(rn||C,0,["exit",hn,$[2]]),C++,I++}if($[1].type==="listItemPrefix"){const mn={type:"listItem",_spread:!1,start:Object.assign({},$[1].start),end:void 0};hn=mn,g.splice(C,0,["enter",mn,$[2]]),C++,I++,gn=void 0,kn=!0}}}return g[d][1]._spread=Z,I}function i(g,d){return I;function I(C){o.call(this,g(C),C),d&&d.call(this,C)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(g,d,I){this.stack[this.stack.length-1].children.push(g),this.stack.push(g),this.tokenStack.push([d,I]),g.position={start:ln(d.start),end:void 0}}function m(g){return d;function d(I){g&&g.call(this,I),h.call(this,I)}}function h(g,d){const I=this.stack.pop(),C=this.tokenStack.pop();if(C)C[0].type!==g.type&&(d?d.call(this,g,C[0]):(C[1]||Wn).call(this,g,C[0]));else throw new Error("Cannot close `"+g.type+"` ("+bn({start:g.start,end:g.end})+"): itâs not open");I.position.end=ln(g.end)}function f(){return mt(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function x(g){if(this.data.expectingFirstListItemValue){const d=this.stack[this.stack.length-2];d.start=Number.parseInt(this.sliceSerialize(g),10),this.data.expectingFirstListItemValue=void 0}}function c(){const g=this.resume(),d=this.stack[this.stack.length-1];d.lang=g}function F(){const g=this.resume(),d=this.stack[this.stack.length-1];d.meta=g}function T(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const g=this.resume(),d=this.stack[this.stack.length-1];d.value=g.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const g=this.resume(),d=this.stack[this.stack.length-1];d.value=g.replace(/(\r?\n|\r)$/g,"")}function j(g){const d=this.resume(),I=this.stack[this.stack.length-1];I.label=d,I.identifier=fn(this.sliceSerialize(g)).toLowerCase()}function S(){const g=this.resume(),d=this.stack[this.stack.length-1];d.title=g}function M(){const g=this.resume(),d=this.stack[this.stack.length-1];d.url=g}function q(g){const d=this.stack[this.stack.length-1];if(!d.depth){const I=this.sliceSerialize(g).length;d.depth=I}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function B(g){const d=this.stack[this.stack.length-1];d.depth=this.sliceSerialize(g).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function _(g){const I=this.stack[this.stack.length-1].children;let C=I[I.length-1];(!C||C.type!=="text")&&(C=ct(),C.position={start:ln(g.start),end:void 0},I.push(C)),this.stack.push(C)}function L(g){const d=this.stack.pop();d.value+=this.sliceSerialize(g),d.position.end=ln(g.end)}function w(g){const d=this.stack[this.stack.length-1];if(this.data.atHardBreak){const I=d.children[d.children.length-1];I.position.end=ln(g.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&r.canContainEols.includes(d.type)&&(_.call(this,g),L.call(this,g))}function y(){this.data.atHardBreak=!0}function D(){const g=this.resume(),d=this.stack[this.stack.length-1];d.value=g}function V(){const g=this.resume(),d=this.stack[this.stack.length-1];d.value=g}function E(){const g=this.resume(),d=this.stack[this.stack.length-1];d.value=g}function U(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const d=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=d,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function N(){const g=this.stack[this.stack.length-1];if(this.data.inReference){const d=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=d,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function J(g){const d=this.sliceSerialize(g),I=this.stack[this.stack.length-2];I.label=dt(d),I.identifier=fn(d).toLowerCase()}function tn(){const g=this.stack[this.stack.length-1],d=this.resume(),I=this.stack[this.stack.length-1];if(this.data.inReference=!0,I.type==="link"){const C=g.children;I.children=C}else I.alt=d}function l(){const g=this.resume(),d=this.stack[this.stack.length-1];d.url=g}function K(){const g=this.resume(),d=this.stack[this.stack.length-1];d.title=g}function en(){this.data.inReference=void 0}function s(){this.data.referenceType="collapsed"}function X(g){const d=this.resume(),I=this.stack[this.stack.length-1];I.label=d,I.identifier=fn(this.sliceSerialize(g)).toLowerCase(),this.data.referenceType="full"}function sn(g){this.data.characterReferenceType=g.type}function Q(g){const d=this.sliceSerialize(g),I=this.data.characterReferenceType;let C;I?(C=$n(d,I==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):C=Bn(d);const A=this.stack.pop();A.value+=C,A.position.end=ln(g.end)}function xn(g){L.call(this,g);const d=this.stack[this.stack.length-1];d.url=this.sliceSerialize(g)}function an(g){L.call(this,g);const d=this.stack[this.stack.length-1];d.url="mailto:"+this.sliceSerialize(g)}function pn(){return{type:"blockquote",children:[]}}function cn(){return{type:"code",lang:null,meta:null,value:""}}function wn(){return{type:"inlineCode",value:""}}function it(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function On(){return{type:"heading",depth:0,children:[]}}function _n(){return{type:"break"}}function Ln(){return{type:"html",value:""}}function at(){return{type:"image",title:null,url:"",alt:null}}function Pn(){return{type:"link",title:null,url:"",children:[]}}function Mn(g){return{type:"list",ordered:g.type==="listOrdered",start:null,spread:g._spread,children:[]}}function lt(g){return{type:"listItem",spread:g._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function st(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function ht(){return{type:"thematicBreak"}}}function ln(n){return{line:n.line,column:n.column,offset:n.offset}}function rt(n,r){let t=-1;for(;++t<r.length;){const e=r[t];Array.isArray(e)?rt(n,e):or(n,e)}}function or(n,r){let t;for(t in r)if(et.call(r,t))switch(t){case"canContainEols":{const e=r[t];e&&n[t].push(...e);break}case"transforms":{const e=r[t];e&&n[t].push(...e);break}case"enter":case"exit":{const e=r[t];e&&Object.assign(n[t],e);break}}}function Wn(n,r){throw n?new Error("Cannot close `"+n.type+"` ("+bn({start:n.start,end:n.end})+"): a different token (`"+r.type+"`, "+bn({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+bn({start:r.start,end:r.end})+") is still open")}function pr(n){const r=this;r.parser=t;function t(e){return ar(e,{...r.data("settings"),...n,extensions:r.data("micromarkExtensions")||[],mdastExtensions:r.data("fromMarkdownExtensions")||[]})}}export{pr as default};
