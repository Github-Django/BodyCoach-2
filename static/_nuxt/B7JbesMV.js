import{d as te,H as ne,F as $,r as j,G as re,bN as de,o as _,c as v,b as e,w as r,a as d,e as h,g as o,D as z,K as T,t as S,M as ie,f as ue,i as ce,m as me,l as pe,_ as _e,k as fe,q as be}from"./BcqZkZus.js";import{_ as ve}from"./BTcz7wsd.js";import{_ as he}from"./D25SEn8T.js";import{_ as ge}from"./CXzJjQ9H.js";import{_ as Be}from"./CWJHJvz0.js";import{_ as Ve}from"./TQMCjICd.js";import{_ as Ue}from"./DrX4eq2Y.js";import{_ as xe}from"./-96HsBT1.js";import{_ as Ie}from"./iFD1Ln8l.js";import{u as ye}from"./BEdX5HNL.js";import{u as Ee}from"./B3yxynLy.js";import{z as s,u as Te,a as Re,F as m,t as ke}from"./D-uu3znW.js";/* empty css        */import"./DqI--y4t.js";import"./B5PW10KA.js";import"./llmWmC7p.js";import"./BQdoyUYG.js";import"./CYRu1j5R.js";import"./C_HXzHsg.js";import"./C3MAjp-z.js";import"./B3PT0ydx.js";const we={class:"flex items-center justify-between p-4"},Ne={class:"flex items-center gap-2"},Oe={class:"p-4"},Ae={class:"mx-auto max-w-lg space-y-12 py-8"},Fe={class:"relative flex flex-col items-center justify-center gap-4"},Ce={class:"relative size-24"},De=["src"],$e=["src"],je={key:2,class:"absolute bottom-0 end-0 z-20"},ze={key:3,class:"absolute bottom-0 end-0 z-20"},Se={class:"relative","data-nui-tooltip":"تصویر بارگذاری"},Qe={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},Pe={class:"grid grid-cols-12 gap-4"},Me={class:"col-span-12 sm:col-span-6"},Ze={class:"col-span-12 sm:col-span-6"},Je={class:"col-span-12"},Le={class:"col-span-12"},Ge={class:"col-span-12"},He={class:"grid grid-cols-12 gap-4"},We={class:"col-span-12 sm:col-span-6"},Ye={class:"col-span-12 sm:col-span-6"},qe={class:"col-span-12 sm:col-span-6"},Ke={class:"col-span-12 sm:col-span-6"},Xe={class:"grid grid-cols-12 gap-4"},eo={class:"col-span-12 sm:col-span-6"},oo={class:"col-span-12 sm:col-span-6"},lo={class:"col-span-12 sm:col-span-6"},ao={class:"col-span-12 sm:col-span-6"},so={class:"col-span-12 sm:col-span-6"},to={class:"col-span-12 sm:col-span-6"},no=1e6,Fo=te({__name:"index",async setup(ro){let B,R;const f={FIRST_REQUIRED:"Your first name can't be empty",LASTNAME_REQUIRED:"Your last name can't be empty",OPTION_REQUIRED:"لطفاً یک گزینه انتخاب کنید",AVATAR_TOO_BIG:"اندازه آواتار باید کمتر از ۱ مگابایت باشد"},Q=s.object({avatar:s.custom(c=>c instanceof File).nullable(),profile:s.object({firstName:s.string().min(1,f.FIRST_REQUIRED),lastName:s.string().min(1,f.LASTNAME_REQUIRED),role:s.string().optional(),location:s.string(),bio:s.string()}),info:s.object({experience:s.union([s.literal("0-2 سال"),s.literal("2-5 سال"),s.literal("5-10 سال"),s.literal("بیش از 10 سال")]).nullable(),firstJob:s.object({label:s.string(),value:s.boolean()}).nullable(),flexible:s.object({label:s.string(),value:s.boolean()}).nullable(),remote:s.object({label:s.string(),value:s.boolean()}).nullable()}),social:s.object({facebook:s.string(),twitter:s.string(),dribbble:s.string(),instagram:s.string(),github:s.string(),gitlab:s.string()})}).superRefine((c,i)=>{c.info.experience||i.addIssue({code:s.ZodIssueCode.custom,message:f.OPTION_REQUIRED,path:["info.experience"]}),c.info.firstJob||i.addIssue({code:s.ZodIssueCode.custom,message:f.OPTION_REQUIRED,path:["info.firstJob"]}),c.info.flexible||i.addIssue({code:s.ZodIssueCode.custom,message:f.OPTION_REQUIRED,path:["info.flexible"]}),c.info.remote||i.addIssue({code:s.ZodIssueCode.custom,message:f.OPTION_REQUIRED,path:["info.remote"]}),c.avatar&&c.avatar.size>no&&i.addIssue({code:s.ZodIssueCode.custom,message:f.AVATAR_TOO_BIG,path:["avatar"]})}),{data:V,pending:io,error:uo,refresh:P}=([B,R]=ne(()=>ye("/api/profile","$6OtAHOQZfD")),B=await B,R(),B),M=ke(Q),Z={avatar:null,profile:{firstName:V.value?.personalInfo?.firstName||"",lastName:V.value?.personalInfo?.lastName||"",role:V.value?.personalInfo?.role||"",location:"",bio:""},info:{experience:null,firstJob:null,flexible:null,remote:null},social:{facebook:"",twitter:"",dribbble:"",instagram:"",github:"",gitlab:""}},J=["0-2 سال","2-5 سال","5-10 سال","بیش از 10 سال"],y=[{label:"بله",value:!0},{label:"خیر",value:!1}],L=$(()=>V.value?.personalInfo?.picture),{handleSubmit:G,isSubmitting:u,setFieldError:H,meta:W,values:co,errors:Y,resetForm:k,setFieldValue:q,setErrors:K}=Te({validationSchema:M,initialValues:Z}),b=j(!1),w=$(()=>Object.keys(Y.value).length),g=j(null),N=Re("avatar");re(g,c=>{const i=c?.item(0)||null;q("avatar",i)}),de(()=>{if(W.value.dirty)return confirm("تغییرات ذخیره نشده دارید. آیا مطمئنید که می‌خواهید ترک کنید؟")});const U=Ee(),O=G(async c=>{b.value=!1,console.log("profile-edit-success",c);try{await new Promise((i,E)=>{c.profile.firstName==="مایا"&&setTimeout(()=>E(new Error("خطای اعتبارسنجی جعلی در بک‌اند")),2e3),setTimeout(i,4e3)}),U.clearAll(),U.show({title:"موفقیت",message:"پروفایل شما به‌روزرسانی شد!",color:"success",icon:"ph:check",closable:!0})}catch(i){i.message==="خطای اعتبارسنجی جعلی در بک‌اند"&&(H("profile.firstName","این نام مجاز نیست"),document.documentElement.scrollTo({top:0,behavior:"smooth"}),U.clearAll(),U.show({title:"اوه!",message:"لطفاً خطاهای فرم را بررسی کنید",color:"danger",icon:"lucide:alert-triangle",closable:!0}));return}await P(),k(),document.documentElement.scrollTo({top:0,behavior:"smooth"}),b.value=!0,setTimeout(()=>{b.value=!1},3e3)},c=>{b.value=!1,console.log("profile-edit-error",c),document.documentElement.scrollTo({top:0,behavior:"smooth"})});return(c,i)=>{const E=ce,X=me,A=pe,F=ve,ee=he,C=_e,D=ge,oe=Be,x=Ve,p=fe,le=Ue,I=xe,ae=be,se=Ie;return _(),v("form",{method:"POST",action:"",class:"w-full pb-16",onSubmit:i[4]||(i[4]=ue((...l)=>o(O)&&o(O)(...l),["prevent"]))},[e(ae,null,{default:r(()=>[d("div",we,[d("div",null,[e(E,{tag:"h2",size:"sm",weight:"medium",lead:"normal",class:"uppercase tracking-wider"},{default:r(()=>[h(" اطلاعات عمومی ")]),_:1}),e(X,{size:"xs",class:"text-muted-400"},{default:r(()=>[h(" ویرایش اطلاعات عمومی حساب شما ")]),_:1})]),d("div",Ne,[e(A,{class:"w-24",to:"/layouts/profile"},{default:r(()=>[h(" لغو ")]),_:1}),e(A,{type:"submit",color:"primary",class:"w-24",disabled:o(u),loading:o(u)},{default:r(()=>[h(" ذخیره ")]),_:1},8,["disabled","loading"])])]),d("div",Oe,[d("div",Ae,[o(b)?(_(),z(F,{key:0,onClose:i[0]||(i[0]=l=>b.value=!1)},{default:r(()=>[h(" پروفایل شما به‌روزرسانی شد! ")]),_:1})):T("",!0),o(w)?(_(),z(F,{key:1,type:"danger",onClose:i[1]||(i[1]=()=>o(K)({}))},{default:r(()=>[h(" این فرم دارای "+S(o(w))+" خطا است، لطفاً قبل از ارسال آنها را بررسی کنید. ",1)]),_:1})):T("",!0),e(x,{label:"تصویر پروفایل",sublabel:"این همان چیزی است که دیگران شما را با آن می‌شناسند"},{default:r(()=>[d("div",Fe,[e(ee,{icon:"ph:image-duotone","filter-file-dropped":l=>l.type.startsWith("image"),onDrop:i[2]||(i[2]=l=>{g.value=l})},null,8,["filter-file-dropped"]),e(oe,{modelValue:o(g),"onUpdate:modelValue":i[3]||(i[3]=l=>ie(g)?g.value=l:null),accept:"image/*"},{default:r(({open:l,remove:t,preview:n,files:a})=>[d("div",Ce,[a?.length&&a.item(0)?(_(),v("img",{key:0,src:n(a.item(0)).value,alt:"پیشنمایش آپلود",class:"bg-muted-200 dark:bg-muted-700/60 size-24 rounded-full object-cover object-center"},null,8,De)):(_(),v("img",{key:1,src:o(L),alt:"پیشنمایش آپلود",class:"bg-muted-200 dark:bg-muted-700/60 size-24 rounded-full object-cover object-center"},null,8,$e)),a?.length&&a.item(0)?(_(),v("div",je,[e(D,{size:"sm",rounded:"full","data-nui-tooltip":"حذف تصویر",onClick:mo=>t(a.item(0))},{default:r(()=>[e(C,{name:"lucide:x",class:"size-4"})]),_:2},1032,["onClick"])])):(_(),v("div",ze,[d("div",Se,[e(D,{size:"sm",rounded:"full",onClick:l},{default:r(()=>[e(C,{name:"lucide:plus",class:"size-4"})]),_:2},1032,["onClick"])])]))])]),_:1},8,["modelValue"]),o(N)?(_(),v("div",Qe,S(o(N)),1)):T("",!0)])]),_:1}),e(x,{label:"اطلاعات پروفایل",sublabel:"دیگران شایسته‌اند که بیشتر با شما آشنا شوند"},{default:r(()=>[d("div",Pe,[d("div",Me,[e(o(m),{name:"profile.firstName"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"ph:user-duotone",placeholder:"نام","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Ze,[e(o(m),{name:"profile.lastName"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"ph:user-duotone",placeholder:"نام خانوادگی","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Je,[e(o(m),{name:"profile.role"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"ph:suitcase-duotone",placeholder:"عنوان شغل","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Le,[e(o(m),{name:"profile.location"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"ph:map-pin-duotone",placeholder:"موقعیت","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Ge,[e(o(m),{name:"profile.bio"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(le,{"model-value":l.value,error:t,disabled:o(u),rows:"4",placeholder:"درباره شما / بیو کوتاه...","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1}),e(x,{label:"اطلاعات حرفه‌ای",sublabel:"این می‌تواند به شما کمک کند فرصت‌هایی را به دست آورید"},{default:r(()=>[d("div",He,[d("div",We,[e(o(m),{name:"info.experience"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(I,{"model-value":l.value,error:t,disabled:o(u),items:J,placeholder:"تجربه",rounded:"sm","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Ye,[e(o(m),{name:"info.firstJob"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(I,{"model-value":l.value,error:t,disabled:o(u),items:y,properties:{label:"label",value:"value"},placeholder:"آیا این اولین شغل شماست؟",rounded:"sm","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",qe,[e(o(m),{name:"info.flexible"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(I,{"model-value":l.value,error:t,disabled:o(u),items:y,properties:{label:"label",value:"value"},placeholder:"آیا شما انعطاف‌پذیر هستید؟",rounded:"sm","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",Ke,[e(o(m),{name:"info.remote"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(I,{"model-value":l.value,error:t,disabled:o(u),items:y,properties:{label:"label",value:"value"},placeholder:"آیا از راه دور کار می‌کنید؟",rounded:"sm","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1}),e(x,{label:"پروفایل‌های سوشیال مدیا",sublabel:"این می‌تواند به دیگران کمک کند شما را در شبکه‌های اجتماعی پیدا کنند"},{default:r(()=>[d("div",Xe,[d("div",eo,[e(o(m),{name:"social.facebook"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:facebook-f",placeholder:"آدرس فیسبوک","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",oo,[e(o(m),{name:"social.twitter"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:twitter",placeholder:"آدرس توییتر","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",lo,[e(o(m),{name:"social.dribbble"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:dribbble",placeholder:"آدرس دریببل","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",ao,[e(o(m),{name:"social.instagram"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:instagram",placeholder:"آدرس اینستاگرام","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",so,[e(o(m),{name:"social.github"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:github",placeholder:"آدرس گیتهاب","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),d("div",to,[e(o(m),{name:"social.gitlab"},{default:r(({field:l,errorMessage:t,handleChange:n,handleBlur:a})=>[e(p,{"model-value":l.value,error:t,disabled:o(u),type:"text",icon:"fa6-brands:gitlab",placeholder:"آدرس گیتلب","onUpdate:modelValue":n,onBlur:a},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1})])])]),_:1}),e(se,{disabled:o(u),loading:o(u),onReset:o(k)},null,8,["disabled","loading","onReset"])],32)}}});export{Fo as default};
