import{M as ce}from"./BQdoyUYG.js";import{d as K,r as $,F as S,aZ as q,aG as l,be as J,aC as M,ag as le,aH as ve,aI as H,bf as fe,bg as be,a8 as Q,bh as me,aD as Pe,aE as ge,aF as ye,a3 as C,aM as W,I as X,aO as L,R as oe,aw as ne,bi as re,aJ as R,aL as V,bj as O,aX as F,aP as Se,aQ as ee,ai as Z,aT as B,bk as I,bl as U,o as we,D as he,w as G,b as A,g as _,C as te,N as ae,bm as $e,a as Ee}from"./BcqZkZus.js";import{s as ke}from"./C_HXzHsg.js";var xe=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(xe||{});let ue=Symbol("PopoverContext");function Y(s){let u=Z(ue,null);if(u===null){let f=new Error(`<${s} /> is missing a parent <${pe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,Y),f}return u}let Fe=Symbol("PopoverGroupContext");function se(){return Z(Fe,null)}let ie=Symbol("PopoverPanelContext");function Ie(){return Z(ie,null)}let pe=K({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(s,{slots:u,attrs:f,expose:E}){var w;let P=$(null);E({el:P,$el:P});let a=$(1),t=$(null),k=$(null),g=$(null),b=$(null),v=S(()=>q(P)),y=S(()=>{var e,n;if(!l(t)||!l(b))return!1;for(let j of document.querySelectorAll("body > *"))if(Number(j?.contains(l(t)))^Number(j?.contains(l(b))))return!0;let o=J(),d=o.indexOf(l(t)),h=(d+o.length-1)%o.length,x=(d+1)%o.length,z=o[h],de=o[x];return!((e=l(b))!=null&&e.contains(z))&&!((n=l(b))!=null&&n.contains(de))}),c={popoverState:a,buttonId:$(null),panelId:$(null),panel:b,button:t,isPortalled:y,beforePanelSentinel:k,afterPanelSentinel:g,togglePopover(){a.value=M(a.value,{0:1,1:0})},closePopover(){a.value!==1&&(a.value=1)},close(e){c.closePopover();let n=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?l(e):l(c.button):l(c.button);n?.focus()}};le(ue,c),ve(S(()=>M(a.value,{0:H.Open,1:H.Closed})));let T={buttonId:c.buttonId,panelId:c.panelId,close(){c.closePopover()}},m=se(),N=m?.registerPopover,[D,i]=fe(),p=be({mainTreeNodeRef:m?.mainTreeNodeRef,portals:D,defaultContainers:[t,b]});function r(){var e,n,o,d;return(d=m?.isFocusWithinPopoverGroup())!=null?d:((e=v.value)==null?void 0:e.activeElement)&&(((n=l(t))==null?void 0:n.contains(v.value.activeElement))||((o=l(b))==null?void 0:o.contains(v.value.activeElement)))}return Q(()=>N?.(T)),me((w=v.value)==null?void 0:w.defaultView,"focus",e=>{var n,o;e.target!==window&&e.target instanceof HTMLElement&&a.value===0&&(r()||t&&b&&(p.contains(e.target)||(n=l(c.beforePanelSentinel))!=null&&n.contains(e.target)||(o=l(c.afterPanelSentinel))!=null&&o.contains(e.target)||c.closePopover()))},!0),Pe(p.resolveContainers,(e,n)=>{var o;c.closePopover(),ge(n,ye.Loose)||(e.preventDefault(),(o=l(t))==null||o.focus())},S(()=>a.value===0)),()=>{let e={open:a.value===0,close:c.close};return C(X,[C(i,{},()=>W({theirProps:{...s,...f},ourProps:{ref:P},slot:e,slots:u,attrs:f,name:"Popover"})),C(p.MainTreeNode)])}}}),Ce=K({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:u,slots:f,expose:E}){var w;let P=(w=s.id)!=null?w:`headlessui-popover-button-${L()}`,a=Y("PopoverButton"),t=S(()=>q(a.button));E({el:a.button,$el:a.button}),oe(()=>{a.buttonId.value=P}),ne(()=>{a.buttonId.value=null});let k=se(),g=k?.closeOthers,b=Ie(),v=S(()=>b===null?!1:b.value===a.panelId.value),y=$(null),c=`headlessui-focus-sentinel-${L()}`;v.value||Q(()=>{a.button.value=l(y)});let T=ke(S(()=>({as:s.as,type:u.type})),y);function m(e){var n,o,d,h,x;if(v.value){if(a.popoverState.value===1)return;switch(e.key){case B.Space:case B.Enter:e.preventDefault(),(o=(n=e.target).click)==null||o.call(n),a.closePopover(),(d=l(a.button))==null||d.focus();break}}else switch(e.key){case B.Space:case B.Enter:e.preventDefault(),e.stopPropagation(),a.popoverState.value===1&&g?.(a.buttonId.value),a.togglePopover();break;case B.Escape:if(a.popoverState.value!==0)return g?.(a.buttonId.value);if(!l(a.button)||(h=t.value)!=null&&h.activeElement&&!((x=l(a.button))!=null&&x.contains(t.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),a.closePopover();break}}function N(e){v.value||e.key===B.Space&&e.preventDefault()}function D(e){var n,o;s.disabled||(v.value?(a.closePopover(),(n=l(a.button))==null||n.focus()):(e.preventDefault(),e.stopPropagation(),a.popoverState.value===1&&g?.(a.buttonId.value),a.togglePopover(),(o=l(a.button))==null||o.focus()))}function i(e){e.preventDefault(),e.stopPropagation()}let p=re();function r(){let e=l(a.panel);if(!e)return;function n(){M(p.value,{[I.Forwards]:()=>O(e,F.First),[I.Backwards]:()=>O(e,F.Last)})===U.Error&&O(J().filter(o=>o.dataset.headlessuiFocusGuard!=="true"),M(p.value,{[I.Forwards]:F.Next,[I.Backwards]:F.Previous}),{relativeTo:l(a.button)})}n()}return()=>{let e=a.popoverState.value===0,n={open:e},{...o}=s,d=v.value?{ref:y,type:T.value,onKeydown:m,onClick:D}:{ref:y,id:P,type:T.value,"aria-expanded":a.popoverState.value===0,"aria-controls":l(a.panel)?a.panelId.value:void 0,disabled:s.disabled?!0:void 0,onKeydown:m,onKeyup:N,onClick:D,onMousedown:i};return C(X,[W({ourProps:d,theirProps:{...u,...o},slot:n,attrs:u,slots:f,name:"PopoverButton"}),e&&!v.value&&a.isPortalled.value&&C(R,{id:c,features:V.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r})])}}}),Be=K({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(s,{attrs:u,slots:f,expose:E}){var w;let P=(w=s.id)!=null?w:`headlessui-popover-panel-${L()}`,{focus:a}=s,t=Y("PopoverPanel"),k=S(()=>q(t.panel)),g=`headlessui-focus-sentinel-before-${L()}`,b=`headlessui-focus-sentinel-after-${L()}`;E({el:t.panel,$el:t.panel}),oe(()=>{t.panelId.value=P}),ne(()=>{t.panelId.value=null}),le(ie,t.panelId),Q(()=>{var i,p;if(!a||t.popoverState.value!==0||!t.panel)return;let r=(i=k.value)==null?void 0:i.activeElement;(p=l(t.panel))!=null&&p.contains(r)||O(l(t.panel),F.First)});let v=Se(),y=S(()=>v!==null?(v.value&H.Open)===H.Open:t.popoverState.value===0);function c(i){var p,r;switch(i.key){case B.Escape:if(t.popoverState.value!==0||!l(t.panel)||k.value&&!((p=l(t.panel))!=null&&p.contains(k.value.activeElement)))return;i.preventDefault(),i.stopPropagation(),t.closePopover(),(r=l(t.button))==null||r.focus();break}}function T(i){var p,r,e,n,o;let d=i.relatedTarget;d&&l(t.panel)&&((p=l(t.panel))!=null&&p.contains(d)||(t.closePopover(),((e=(r=l(t.beforePanelSentinel))==null?void 0:r.contains)!=null&&e.call(r,d)||(o=(n=l(t.afterPanelSentinel))==null?void 0:n.contains)!=null&&o.call(n,d))&&d.focus({preventScroll:!0})))}let m=re();function N(){let i=l(t.panel);if(!i)return;function p(){M(m.value,{[I.Forwards]:()=>{var r;O(i,F.First)===U.Error&&((r=l(t.afterPanelSentinel))==null||r.focus())},[I.Backwards]:()=>{var r;(r=l(t.button))==null||r.focus({preventScroll:!0})}})}p()}function D(){let i=l(t.panel);if(!i)return;function p(){M(m.value,{[I.Forwards]:()=>{let r=l(t.button),e=l(t.panel);if(!r)return;let n=J(),o=n.indexOf(r),d=n.slice(0,o+1),h=[...n.slice(o+1),...d];for(let x of h.slice())if(x.dataset.headlessuiFocusGuard==="true"||e!=null&&e.contains(x)){let z=h.indexOf(x);z!==-1&&h.splice(z,1)}O(h,F.First,{sorted:!1})},[I.Backwards]:()=>{var r;O(i,F.Previous)===U.Error&&((r=l(t.button))==null||r.focus())}})}p()}return()=>{let i={open:t.popoverState.value===0,close:t.close},{focus:p,...r}=s,e={ref:t.panel,id:P,onKeydown:c,onFocusout:a&&t.popoverState.value===0?T:void 0,tabIndex:-1};return W({ourProps:e,theirProps:{...u,...r},attrs:u,slot:i,slots:{...f,default:(...n)=>{var o;return[C(X,[y.value&&t.isPortalled.value&&C(R,{id:g,ref:t.beforePanelSentinel,features:V.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:N}),(o=f.default)==null?void 0:o.call(f,...n),y.value&&t.isPortalled.value&&C(R,{id:b,ref:t.afterPanelSentinel,features:V.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D})])]}},features:ee.RenderStrategy|ee.Static,visible:y.value,name:"PopoverPanel"})}}});const De=K({__name:"TairoPopover",props:{rounded:{default:"sm"},size:{default:"md"},orientation:{default:"start"},fixed:{type:Boolean,default:!1},placement:{default:void 0}},setup(s){const u=s,f=S(()=>u.placement?u.placement:u.orientation==="end"?"bottom-end":"bottom-start");return(E,w)=>(we(),he(_(pe),null,{default:G(()=>[A(_(ce),{enter:"transition-all duration-200 ease-out","enter-from":"translate-y-1 opacity-0","enter-to":"translate-y-0 opacity-100",leave:"transition duration-150 ease-in","leave-from":"translate-y-0 opacity-100","leave-to":"translate-y-1 opacity-0","tailwindcss-origin-class":"",offset:10,strategy:u.fixed?"fixed":"absolute",placement:_(f),"adaptive-width":u.fixed,"z-index":20},{default:G(()=>[A(_(Ce),{class:"group inline-flex cursor-pointer font-sans focus:outline-none",as:"div"},{default:G(()=>[te(E.$slots,"default")]),_:3}),A(_(Be),{class:ae(["absolute z-10 mt-3 w-screen",[u.size==="sm"&&"max-w-[240px]",u.size==="md"&&"max-w-xs",u.orientation==="start"&&"-start-3",u.orientation==="end"&&"-end-3"]])},{default:G(()=>[A(_($e),null,{default:G(()=>[Ee("div",{class:ae(["border-muted-200 after:border-muted-200 dark:border-muted-600 dark:bg-muted-700 dark:after:border-muted-600 dark:after:bg-muted-700 shadow-muted-300/30 dark:shadow-muted-800/20 relative w-full rounded-lg border bg-white shadow-xl after:absolute after:-top-2 after:size-4 after:rotate-[-135deg] after:border-b after:border-e after:bg-white after:content-['']",[u.orientation==="start"&&"after:start-6",u.orientation==="end"&&"after:end-6"]])},[te(E.$slots,"content")],2)]),_:3})]),_:3},8,["class"])]),_:3},8,["strategy","placement","adaptive-width"])]),_:3}))}});export{De as _};
