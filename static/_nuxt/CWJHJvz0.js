import{d as h,ad as _,ae as B,r as D,aa as k,ag as y,s as C,o as M,c as V,C as T,g as n,a as x,y as I}from"./BcqZkZus.js";import{u as c}from"./DqI--y4t.js";const N={class:"group/nui-file-headless relative"},P=["id","multiple"],R=h({inheritAttrs:!1,__name:"BaseInputFileHeadless",props:_({id:{default:void 0},multiple:{type:Boolean,default:!1},filterFileDropped:{type:Function,default:()=>!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m,{expose:w}){const o=m,[s]=B(m,"modelValue"),e=D(),r=k(()=>o.id),v=new WeakMap;function u(){e.value?.click()}function d(a){a.stopPropagation(),a.preventDefault();const l=a.dataTransfer,i=new DataTransfer;if(e.value&&l){for(const t of l.files)o.filterFileDropped(t)&&i.items.add(t);e.value.files=i.files,s.value=e.value.files}}function p(a){if(!a||!s.value||!e.value)return;const l=new DataTransfer;v.has(a)&&v.delete(a);for(const i of s.value)i!==a&&l.items.add(i);e.value.files=l.files,s.value=e.value.files}function F(a){const l=a.target.files;if(l)if(o.multiple&&s.value){const i=[...s.value],t=new DataTransfer;for(const f of i)t.items.add(f);for(const f of l)i.some(g=>g.name===f.name)||t.items.add(f);if(!e.value)return;e.value.files=t.files,s.value=t.files}else s.value=l}return y("BaseInputFileHeadlessContext",C({el:e,id:r,files:s,open:u,remove:p,preview:c,drop:d})),w({el:e,id:r,files:s,open:u,remove:p,preview:c,drop:d}),(a,l)=>(M(),V("div",N,[T(a.$slots,"default",{id:n(r),el:n(e),files:n(s),open:u,remove:p,preview:n(c),drop:d}),x("input",I({id:n(r),ref_key:"inputRef",ref:e,type:"file"},a.$attrs,{class:"hidden",multiple:o.multiple,onChange:F}),null,16,P)]))}});export{R as _};
