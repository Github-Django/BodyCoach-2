import{_ as j}from"./D25SEn8T.js";import{d as L,r as U,F as N,G as Y,bN as G,o as v,c as b,a as e,f as $,b as l,w as n,g as a,M as Z,t as H,K as W,e as T,_ as K,k as X,l as q}from"./BcqZkZus.js";import{_ as J}from"./CXzJjQ9H.js";import{_ as ee}from"./CWJHJvz0.js";import{_ as le}from"./TQMCjICd.js";import{_ as oe}from"./kS1fbhvo.js";import{u as ae}from"./B3yxynLy.js";import{z as i,u as se,a as te,F as c,t as de}from"./D-uu3znW.js";/* empty css        */import"./DqI--y4t.js";import"./CYv6XnjC.js";const ne={class:"w-full"},ie={class:"space-y-8"},re={class:"mx-auto flex w-full max-w-2xl flex-col"},ue={class:"relative mb-5 flex flex-col items-center justify-center gap-4"},ce={class:"relative size-28"},me=["src"],pe=["src"],_e={key:2,class:"absolute bottom-1 end-1 z-20"},ve={key:3,class:"absolute bottom-1 end-1 z-20"},be={class:"relative","data-tooltip":"تصویر بارگذاری"},fe={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},he={class:"space-y-12"},Ee={class:"grid grid-cols-12 gap-4"},ge={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Re={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Ue={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},ye={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Ae={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Ie={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Be={class:"grid grid-cols-12 gap-4"},De={class:"col-span-12"},Ve={class:"col-span-12"},Ne={class:"col-span-12 sm:col-span-4"},Te={class:"col-span-12 sm:col-span-4"},xe={class:"col-span-12 sm:col-span-4"},Qe={class:"col-span-12"},Ce=e("option",{value:"",hidden:""},null,-1),Se=e("option",{value:"ایالات متحده"}," ایالات متحده ",-1),we=e("option",{value:"کانادا"}," کانادا ",-1),ze=e("option",{value:"فرانسه"}," فرانسه ",-1),ke=e("option",{value:"آلمان"}," آلمان ",-1),Me=e("option",{value:"اسپانیا"}," اسپانیا ",-1),Oe=e("option",{value:"چین"}," چین ",-1),Fe=e("option",{value:"ژاپن"}," ژاپن ",-1),Pe={class:"grid grid-cols-12 gap-4"},je={class:"col-span-12"},Le={class:"col-span-12"},Ye={class:"col-span-12 sm:col-span-4"},Ge={class:"col-span-12 sm:col-span-4"},$e={class:"col-span-12 sm:col-span-4"},Ze={class:"col-span-12"},He=e("option",{value:"",hidden:""},null,-1),We=e("option",{value:"ایالات متحده"}," ایالات متحده ",-1),Ke=e("option",{value:"کانادا"}," کانادا ",-1),Xe=e("option",{value:"فرانسه"}," فرانسه ",-1),qe=e("option",{value:"آلمان"}," آلمان ",-1),Je=e("option",{value:"اسپانیا"}," اسپانیا ",-1),el=e("option",{value:"چین"}," چین ",-1),ll=e("option",{value:"ژاپن"}," ژاپن ",-1),ol={class:"mt-5 flex flex-col-reverse gap-y-4 text-end md:block md:space-x-3 md:space-x-reverse"},al=1e6,El=L({__name:"company-edit",setup(sl){U({input:"YYYY-MM-DD"});const r={COMPANY_NAME_REQUIRED:"نام شرکت نمی‌تواند خالی باشد",LEGAL_NAME_REQUIRED:"نام قانونی نمی‌تواند خالی باشد",PREFERRED_NAME_REQUIRED:"نام ترجیحی باید حداقل ۳ کاراکتر باشد",EMAIL_REQUIRED:"آدرس ایمیل نمی‌تواند خالی باشد",PHONE_REQUIRED:"شماره تلفن نمی‌تواند خالی باشد",TWITTER_REQUIRED:"دسته توییتر نمی‌تواند خالی باشد",ADDRESS_REQUIRED:"لطفاً یک آدرس وارد کنید",CITY_REQUIRED:"لطفاً یک شهر وارد کنید",STATE_REQUIRED:"لطفاً یک استان وارد کنید",ZIPCODE_REQUIRED:"لطفاً یک کد پستی وارد کنید",AVATAR_TOO_BIG:"اندازه آواتار باید کمتر از ۱ مگابایت باشد"},x=i.object({avatar:i.custom(m=>m instanceof File).nullable(),profile:i.object({companyName:i.string().min(1,r.COMPANY_NAME_REQUIRED),dba:i.string().min(1,r.LEGAL_NAME_REQUIRED),commonName:i.string().optional(),email:i.string().min(1,r.EMAIL_REQUIRED),phone:i.string().min(1,r.PHONE_REQUIRED),twitterHandle:i.string().min(3,r.TWITTER_REQUIRED),mailingAddress:i.object({address:i.string().min(1,r.ADDRESS_REQUIRED),suite:i.string().min(1,r.ADDRESS_REQUIRED).optional(),city:i.string().min(1,r.CITY_REQUIRED),state:i.string().min(1,r.STATE_REQUIRED),zipcode:i.string().min(5,r.ZIPCODE_REQUIRED),country:i.string()}),legalAddress:i.object({address:i.string().min(1,r.ADDRESS_REQUIRED),suite:i.string().min(1,r.ADDRESS_REQUIRED).optional(),city:i.string().min(1,r.CITY_REQUIRED),state:i.string().min(1,r.STATE_REQUIRED),zipcode:i.string().min(5,r.ZIPCODE_REQUIRED),country:i.string()})})}).superRefine((m,p)=>{m.avatar&&m.avatar.size>al&&p.addIssue({code:i.ZodIssueCode.custom,message:r.AVATAR_TOO_BIG,path:["avatar"]}),m.profile.companyName===""&&p.addIssue({code:i.ZodIssueCode.custom,message:r.COMPANY_NAME_REQUIRED,path:["profile.companyName"]}),m.profile.dba===""&&p.addIssue({code:i.ZodIssueCode.custom,message:r.LEGAL_NAME_REQUIRED,path:["profile.dba"]}),m.profile.commonName&&m.profile.commonName!==""&&m.profile.commonName.length<3&&p.addIssue({code:i.ZodIssueCode.custom,message:r.PREFERRED_NAME_REQUIRED,path:["profile.commonName"]})}),Q=de(x),C={avatar:null,profile:{companyName:"",dba:"",commonName:"",email:"",phone:"",twitterHandle:"",mailingAddress:{address:"",suite:"",city:"",state:"",zipcode:"",country:"ایالات متحده"},legalAddress:{address:"",suite:"",city:"",state:"",zipcode:"",country:"ایالات متحده"}}},{handleSubmit:S,isSubmitting:u,setFieldError:w,meta:z,values:tl,errors:k,resetForm:M,setFieldValue:O,setErrors:dl}=se({validationSchema:Q,initialValues:C}),F=N(()=>"/img/avatars/company.svg"),h=U(!1);N(()=>Object.keys(k.value).length);const f=U(null),y=te("avatar");Y(f,m=>{const p=m?.item(0)||null;O("avatar",p)}),G(()=>{if(z.value.dirty)return confirm("تغییرات ذخیره نشده دارید. آیا مطمئنید که می‌خواهید ترک کنید؟")});const E=ae(),A=S(async m=>{h.value=!1,console.log("company-edit-success",m);try{await new Promise((p,g)=>{m.profile.companyName==="Acme"&&setTimeout(()=>g(new Error("خطای اعتبارسنجی جعلی در بک‌اند")),2e3),setTimeout(p,4e3)}),E.clearAll(),E.show({title:"موفقیت",message:"Changes have been saved!",color:"success",icon:"ph:check",closable:!0})}catch(p){p.message==="خطای اعتبارسنجی جعلی در بک‌اند"&&(w("profile.companyName","این نام مجاز نیست"),document.documentElement.scrollTo({top:0,behavior:"smooth"}),E.clearAll(),E.show({title:"اوه!",message:"لطفاً خطاهای فرم را بررسی کنید",color:"danger",icon:"lucide:alert-triangle",closable:!0}));return}M(),document.documentElement.scrollTo({top:0,behavior:"smooth"}),h.value=!0,setTimeout(()=>{h.value=!1},3e3)},m=>{h.value=!1,console.log("company-edit-error",m),document.documentElement.scrollTo({top:0,behavior:"smooth"})});return(m,p)=>{const g=j,I=K,B=J,P=ee,_=X,R=le,D=oe,V=q;return v(),b("div",ne,[e("div",null,[e("form",{method:"POST",action:"",class:"",onSubmit:p[2]||(p[2]=$((...o)=>a(A)&&a(A)(...o),["prevent"]))},[e("div",ie,[e("div",re,[e("div",null,[e("div",null,[e("div",ue,[l(g,{icon:"ph:image-duotone","filter-file-dropped":o=>o.type.startsWith("image"),onDrop:p[0]||(p[0]=o=>{f.value=o})},null,8,["filter-file-dropped"]),l(P,{modelValue:a(f),"onUpdate:modelValue":p[1]||(p[1]=o=>Z(f)?f.value=o:null),accept:"image/*"},{default:n(({open:o,remove:t,preview:d,files:s})=>[e("div",ce,[s?.length&&s.item(0)?(v(),b("img",{key:0,src:d(s.item(0)).value,alt:"پیشنمایش آپلود",class:"bg-muted-200 dark:bg-muted-700/60 size-28 rounded-full object-cover object-center"},null,8,me)):(v(),b("img",{key:1,src:a(F),alt:"پیشنمایش آپلود",class:"bg-muted-200 dark:bg-muted-700/60 size-28 rounded-full object-cover object-center dark:invert"},null,8,pe)),s?.length&&s.item(0)?(v(),b("div",_e,[l(B,{size:"sm",rounded:"full","data-tooltip":"حذف تصویر",class:"scale-90",onClick:nl=>t(s.item(0))},{default:n(()=>[l(I,{name:"lucide:x",class:"size-4"})]),_:2},1032,["onClick"])])):(v(),b("div",ve,[e("div",be,[l(B,{size:"sm",rounded:"full",onClick:o},{default:n(()=>[l(I,{name:"lucide:plus",class:"size-4"})]),_:2},1032,["onClick"])])]))])]),_:1},8,["modelValue"]),a(y)?(v(),b("div",fe,H(a(y)),1)):W("",!0)]),e("div",he,[l(R,{label:"اطلاعات شرکت",sublabel:"اطلاعات پایه درباره شرکت"},{default:n(()=>[e("div",Ee,[e("div",ge,[l(a(c),{name:"profile.companyName"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"قانونی نام",icon:"ph:buildings-duotone",placeholder:"مثال: شرکت ال تم","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Re,[l(a(c),{name:"profile.dba"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"انجام کسب‌وکار تحت نام DBA",icon:"ph:buildings-duotone",placeholder:"مثال: سیستم‌های ال تم","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ue,[l(a(c),{name:"profile.commonName"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"نام متداول",icon:"ph:buildings-duotone",placeholder:"مثال: سیستم‌های ال تم","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",ye,[l(a(c),{name:"profile.email"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"آدرس ایمیل",icon:"ph:envelope-duotone",placeholder:"مثال: contact@eltheme.ir","model-value":o.value,error:t,disabled:a(u),type:"email","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ae,[l(a(c),{name:"profile.phone"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{icon:"lucide:phone",label:"شماره تلفن",placeholder:"مثال: +1 555 123 4567","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ie,[l(a(c),{name:"profile.twitterHandle"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{icon:"lucide:twitter",label:"شناسه توئیتر",placeholder:"مثال: @eltheme","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1}),l(R,{label:"آدرس پستی",sublabel:"آدرس شرکت"},{default:n(()=>[e("div",Be,[e("div",De,[l(a(c),{name:"profile.mailingAddress.address"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"آدرس",icon:"ph:map-pin-duotone",placeholder:"مثال: ۴۸، راه‌آهن سانتا باربارا","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ve,[l(a(c),{name:"profile.mailingAddress.suite"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"خیابان / سوئیت",icon:"ph:map-pin-duotone",placeholder:"مثال: آپارتمان 12، سوئیت G4","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ne,[l(a(c),{name:"profile.mailingAddress.city"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"شهر",icon:"ph:buildings-duotone",placeholder:"مثال: لس آنجلس","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Te,[l(a(c),{name:"profile.mailingAddress.state"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"استان/ایالت",icon:"ph:globe-duotone",placeholder:"مثال: CA","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",xe,[l(a(c),{name:"profile.mailingAddress.zipcode"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{type:"text",label:"کد پستی",icon:"ph:paper-plane-tilt-duotone",placeholder:"مثال: ۹۱۲۶۵۶","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Qe,[l(a(c),{name:"profile.mailingAddress.country"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(D,{rounded:"md",label:"کشور","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},{default:n(()=>[Ce,Se,we,ze,ke,Me,Oe,Fe]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1}),l(R,{label:"آدرس قانونی",sublabel:"آدرس قانونی شرکت"},{default:n(()=>[e("div",Pe,[e("div",je,[l(a(c),{name:"profile.legalAddress.address"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"آدرس",icon:"ph:map-pin-duotone",placeholder:"مثال: ۴۸، راه‌آهن سانتا باربارا","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Le,[l(a(c),{name:"profile.legalAddress.suite"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"خیابان / سوئیت",icon:"ph:map-pin-duotone",placeholder:"مثال: آپارتمان 12، سوئیت G4","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ye,[l(a(c),{name:"profile.legalAddress.city"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"شهر",icon:"ph:buildings-duotone",placeholder:"مثال: لس آنجلس","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ge,[l(a(c),{name:"profile.legalAddress.state"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{label:"استان/ایالت",icon:"ph:globe-duotone",placeholder:"مثال: CA","model-value":o.value,error:t,disabled:a(u),type:"text","onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",$e,[l(a(c),{name:"profile.legalAddress.zipcode"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(_,{type:"text",label:"کد پستی",icon:"ph:paper-plane-tilt-duotone",placeholder:"مثال: ۹۱۲۶۵۶","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ze,[l(a(c),{name:"profile.legalAddress.country"},{default:n(({field:o,errorMessage:t,handleChange:d,handleBlur:s})=>[l(D,{rounded:"md",label:"کشور","model-value":o.value,error:t,disabled:a(u),"onUpdate:modelValue":d,onBlur:s},{default:n(()=>[He,We,Ke,Xe,qe,Je,el,ll]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])]),_:1}),e("div",ol,[l(V,{to:"/layouts/company",type:"button",color:"muted",class:"w-full sm:w-40",rounded:"md",size:"lg"},{default:n(()=>[T(" لغو ")]),_:1}),l(V,{type:"submit",color:"primary",class:"w-full sm:w-40",rounded:"md",size:"lg",loading:a(u)},{default:n(()=>[T(" ذخیره تغییرات ")]),_:1},8,["loading"])])])])])])])],32)])])}}});export{El as default};
